<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="scenariotracker">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<title>PFS Sessiontracker</title>

	<link rel="stylesheet" href="./css/bootstrap.css">
	<link rel="stylesheet" href="./css/main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
	<script src="./scripts/vendor/bootstrap.js"></script>
	<script src="./scripts/vendor/ui-bootstrap-tpls-0.13.0.min.js"></script>
	<script src="./scripts/scenariotracker.js"></script>
	<script src="./scripts/controllers/search.js"></script>
	
	<!-- RangeSlider: https://github.com/danielcrisp/angular-rangeslider -->
	<link rel="stylesheet" href="./css/angular.rangeSlider.css">
	<script src="./scripts/vendor/angular.rangeSlider.js"></script>
	
	<!-- Angular Spinner: https://github.com/urish/angular-spinner -->
	<script src="./scripts/vendor/spin.min.js"></script>
	<script src="./scripts/vendor/angular-spinner.js"></script>
</head>
<body ng-controller="SearchController as vm">
	<div class="row playerbar">
		<div class="col-sm-2">
			<img src="./images/logo_pfs.png" width="270">
		</div>
		<div class="col-sm-6">
			<div class="form-group has-feedback">
				<label class="control-label">Search players</label> <input class="search form-control" placeholder="Search"><i class="glyphicon glyphicon-search form-control-feedback" style="color: grey;"></i> <button>Add</button>
			</div>
			<div>Al toegevoegde mensen:</div>
			<span ng-repeat="person in vm.people" style="float:left;">
				{{$first ? '' : $last ? ' and ' : ', '}}{{person.name}} ({{person.pfsnumber}})
			</span>			
		</div>
	</div>
	<div class="col-sm-2 filterbar">
		<span>Filters</span>
			<form>
				<div class="form-group has-feedback">
					<label for="scenarioSelect">Scenario name</label>
					<input type="text" class="form-control" id="scenarioSelect" ng-model="vm.filters.search" ng-change="vm.getScenarios()" ng-model-options="{debounce: 300}" placeholder="Search scenarios"><i class="glyphicon glyphicon-search form-control-feedback" style="color: grey;"></i>
				</div>			
				<div class="form-group filter">
					<strong>Level range:</strong>
					<div range-slider 
						min="1" 
						max="13" 
						step="1" 
						model-min="vm.filters.levelRangeMin" 
						model-max="vm.filters.levelRangeMax" 
						attach-handle-values="true"
						show-values="true"></div>
				</div>			
				<div class="form-group filter">
					<strong>Season</strong>
					<ul class="list-unstyled">
						<li><input type="checkbox" name="season" value=""><label class="checkbox">0</label></li>
						<li><input type="checkbox" name="season" value=""><label class="checkbox">1</label></li>
						<li><input type="checkbox" name="season" value=""><label class="checkbox">2</label></li>
						<li><input type="checkbox" name="season" value=""><label class="checkbox">3</label></li>
						<li><input type="checkbox" name="season" value=""><label class="checkbox">4</label></li>
						<li><input type="checkbox" name="season" value=""><label class="checkbox">5</label></li>
						<li><input type="checkbox" name="season" value=""><label class="checkbox">6</label></li>
						<li><input type="checkbox" name="season" value=""><label class="checkbox">7</label></li>
					</ul>
				</div>
				<div class="form-group filter">
					<strong>Type campaign:</strong>
					<label class="checkbox"><input type="checkbox" value="">PFS </label>
					<label class="checkbox"><input type="checkbox" value="">CORE </label>
				</div>
				<div class="form-group has-feedback">
					<label for="authorSelect">Author(s)</label>
					<input type="text" class="form-control" id="authorSelect" placeholder="Search author"><i class="glyphicon glyphicon-search form-control-feedback" style="color: grey;"></i>
				</div>
				<div class="form-group filter">
					<strong>Other:</strong>
					<label class="checkbox"><input type="checkbox" value="">Include retired scenarios</label>
				</div>				
			</form>
	</div>             
	
	<div class="container col-sm-6">
		<div class="row">
			<div>
				<span class="spinner" us-spinner="{radius:30, width:8, length: 16}" spinner-key="spinner-1"></span>
			</div>
			<span>Found a total of <strong>{{vm.pagination.totalItems}}</strong> scenarios</span>
			<div class="pfs-pagination" ng-show="vm.scenarios.length > 0">
				<pagination class="pagination-sm" ng-model="vm.pagination.currentPage" boundary-links="true" total-items="vm.pagination.totalItems" items-per-page="20" max-size="5" previous-text="Previous" next-text="Next" first-text="First" last-text="Last" ng-change="vm.changePage()"></pagination>
			</div>
			<div ng-repeat="scenario in vm.scenarios">
				<div class="scenario">		
					<div class="title">
						<span ng-if='scenario.archived != NULL' class="glyphicon glyphicon-remove archived" title="You cannot play this scenario for credit, it was retired on {{scenario.archived}}"></span>					
						<span ng-if='scenario.evergreen == 1' class="glyphicon glyphicon-leaf evergreen" title="Evergreen"></span>
						#{{scenario.season}}-{{scenario.number}} {{scenario.name}} 
						<span class="authors">by </span><span class="authors" ng-show="scenario.authors.length == 0">Unknown</span><span class="authors" ng-repeat="author in scenario.authors">{{$first ? '' : $last ? ' and ' : ', '}}{{author}}</span>
					</div>	
					<span>{{scenario.description}}</span> 
					<br>		
					<span>Type: {{scenario.type}}</span>
					<br>	
					<span>Tier: <span ng-show="!scenario.tier">Unknown</span>{{scenario.tier}} (<span ng-show="scenario.subtiers.length == 0">Unknown</span><span ng-repeat="subtier in scenario.subtiers">{{$first ? '' : ', '}}{{subtier}}</span>)</span>	
				</div>
			</div>
			<div class="pfs-pagination" ng-show="vm.scenarios.length > 0">
				<pagination class="pagination-sm" ng-model="vm.pagination.currentPage" boundary-links="true" total-items="vm.pagination.totalItems" items-per-page="20" max-size="5" previous-text="Previous" next-text="Next" first-text="First" last-text="Last" ng-change="vm.changePage()"></pagination>
			</div>			
		</div>
	</div>
</body>
</html>